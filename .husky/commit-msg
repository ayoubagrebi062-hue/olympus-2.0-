#!/bin/sh
# OLYMPUS Commit Message Validator v1.0
# Enforces conventional commits: type(scope): message

echo ""
echo "ğŸ“ Validating commit message..."
npx --no -- commitlint --edit "$1" 2>&1 || {
  echo ""
  echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
  echo "â•‘  âŒ INVALID COMMIT MESSAGE                                       â•‘"
  echo "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
  echo "â•‘  Required format: type(scope): message                           â•‘"
  echo "â•‘                                                                  â•‘"
  echo "â•‘  Types:                                                          â•‘"
  echo "â•‘    feat     â†’ New feature                                        â•‘"
  echo "â•‘    fix      â†’ Bug fix                                            â•‘"
  echo "â•‘    docs     â†’ Documentation only                                 â•‘"
  echo "â•‘    style    â†’ Formatting (no code change)                        â•‘"
  echo "â•‘    refactor â†’ Code restructure (no feature/fix)                  â•‘"
  echo "â•‘    perf     â†’ Performance improvement                            â•‘"
  echo "â•‘    test     â†’ Adding/updating tests                              â•‘"
  echo "â•‘    build    â†’ Build system or dependencies                       â•‘"
  echo "â•‘    ci       â†’ CI/CD configuration                                â•‘"
  echo "â•‘    chore    â†’ Maintenance tasks                                  â•‘"
  echo "â•‘                                                                  â•‘"
  echo "â•‘  Examples:                                                       â•‘"
  echo "â•‘    feat(auth): add google oauth login                            â•‘"
  echo "â•‘    fix(api): handle null response from endpoint                  â•‘"
  echo "â•‘    docs: update installation guide                               â•‘"
  echo "â•‘                                                                  â•‘"
  echo "â•‘  Rules:                                                          â•‘"
  echo "â•‘    âœ— Subject must be lowercase                                   â•‘"
  echo "â•‘    âœ— Max 72 characters                                           â•‘"
  echo "â•‘    âœ— No period at end                                            â•‘"
  echo "â•‘                                                                  â•‘"
  echo "â•‘  Bypass: git commit --no-verify -m \"message\"                     â•‘"
  echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
  echo ""
  exit 1
}
echo "âœ… Commit message valid"
